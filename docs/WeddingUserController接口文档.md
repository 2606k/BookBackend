# WeddingUserController 接口文档

## 概述
WeddingUserController是用户管理控制器，负责处理用户注册、登录功能，以及提供后台管理页面。

**基础路径**: `/user`

## API接口列表

### 1. 用户注册
- **接口**: `POST /user/register`
- **功能**: 注册新用户账号
- **请求参数**:
```json
{
  "userName": "用户名",
  "avatarUrl": "头像URL（可选）",
  "phone": "手机号",
  "password": "密码"
}
```
- **响应结果**:
```json
{
  "code": 200,
  "msg": "成功",
  "data": "用户ID"
}
```

### 2. 用户登录
- **接口**: `POST /user/checklogin`
- **功能**: 用户登录验证
- **请求参数**:
```json
{
  "phone": "手机号",
  "password": "密码"
}
```
- **响应结果**:
```json
{
  "code": 200,
  "msg": "成功",
  "data": {
    "id": "用户ID",
    "username": "用户名",
    "avatarUrl": "头像URL",
    "phone": "手机号",
    "createdat": "创建时间"
  }
}
```

## Web页面接口

### 1. 登录页面
- **接口**: `GET /user/login`
- **功能**: 返回登录页面
- **响应**: 返回 `login.html` 页面

### 2. 后台管理主页
- **接口**: `GET /user/dashboard`
- **功能**: 返回后台管理主页
- **响应**: 返回 `dashboard.html` 页面

### 3. 预约记录查看页面
- **接口**: `GET /user/appointments`
- **功能**: 返回预约记录查看页面
- **响应**: 返回 `appointments/view.html` 页面

## 用户信息说明
- **username**: 用户显示名称
- **phone**: 用户手机号，作为登录凭证
- **password**: 用户密码（建议加密存储）
- **avatarUrl**: 用户头像图片URL
- **createdat**: 用户注册时间

## 登录逻辑
1. **验证方式**: 使用手机号和密码进行登录验证
2. **登录检查**: 精确匹配手机号和密码
3. **失败处理**: 用户不存在时返回相应错误信息

## 注册逻辑
1. **必填字段**: 用户名、手机号、密码为必填项
2. **自动设置**: 注册时间自动设置为当前时间
3. **返回信息**: 注册成功后返回新用户的ID

## 页面路由
- `/user/login`: 用户登录页面
- `/user/dashboard`: 后台管理主页
- `/user/appointments`: 预约记录管理页面

## 错误处理
所有接口在出现错误时返回统一格式：
```json
{
  "code": 500,
  "msg": "错误描述",
  "data": null
}
```

## 常见错误
- `用户不存在`: 登录时手机号或密码错误
- `保存用户信息失败`: 注册时数据库操作异常
- `用户登录失败`: 登录过程中发生异常

## 安全建议
1. **密码加密**: 建议对用户密码进行加密存储
2. **手机号验证**: 注册时应验证手机号格式和唯一性
3. **登录限制**: 可以增加登录失败次数限制
4. **会话管理**: 登录成功后应建立用户会话
5. **权限控制**: 后台页面应增加权限验证

## 注意事项
1. 当前密码未加密，生产环境需要增加加密处理
2. 缺少手机号唯一性检查，可能造成重复注册
3. 登录成功后需要前端自行处理会话状态
4. 后台页面路由可能需要登录验证中间件
5. 头像URL需要确保是有效的图片链接
