# AppointmentsController 接口文档

## 概述
AppointmentsController是预约记录管理控制器，负责处理用户预约记录的创建和查询功能。

**基础路径**: `/appoint`

## 接口列表

### 1. 添加预约记录
- **接口**: `POST /appoint/add`
- **功能**: 创建新的预约记录
- **请求参数**:
```json
{
  "openid": "用户openid",
  "name": "预约人姓名",
  "phone": "联系电话",
  "address": "预约地址",
  "appointmentTime": "预约时间",
  "serviceType": "服务类型",
  "remark": "备注信息（可选）"
}
```
- **响应结果**:
```json
{
  "code": 200,
  "msg": "预约成功",
  "data": null
}
```

### 2. 查询预约记录列表
- **接口**: `POST /appoint/list`
- **功能**: 查询预约记录列表，支持用户端和管理端查询
- **请求参数**:
```json
{
  "openid": "用户openid（可选，为空时为管理端查询）",
  "phone": "手机号（可选，精确查询）",
  "address": "地址关键词（可选，模糊查询）"
}
```
- **响应结果**:
```json
{
  "code": 200,
  "msg": "成功",
  "data": [
    {
      "id": "预约记录ID",
      "openid": "用户openid",
      "name": "预约人姓名",
      "phone": "联系电话",
      "address": "预约地址",
      "appointmentTime": "预约时间",
      "serviceType": "服务类型",
      "status": "预约状态",
      "remark": "备注信息",
      "createdAt": "创建时间"
    }
  ]
}
```

## 查询逻辑说明
- **用户端查询**: 当请求参数中包含`openid`时，只查询该用户的预约记录
- **管理端查询**: 当请求参数中不包含`openid`时，查询所有预约记录，支持按手机号和地址关键词过滤

## 预约状态说明
- `待确认`: 预约已提交，等待商家确认
- `已确认`: 商家已确认预约
- `进行中`: 服务正在进行
- `已完成`: 服务已完成
- `已取消`: 预约已取消

## 错误处理
所有接口在出现错误时返回统一格式：
```json
{
  "code": 500,
  "msg": "错误描述",
  "data": null
}
```

## 注意事项
1. 预约时间建议使用标准时间格式
2. 地址查询支持模糊匹配
3. 手机号查询为精确匹配
4. 管理端可以查看所有用户的预约记录
5. 用户端只能查看自己的预约记录
