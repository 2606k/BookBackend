# CategoriesController 接口文档

## 概述
CategoriesController是分类管理控制器，负责处理书籍分类的增删改查功能。提供Web页面管理和API接口两种方式。

**基础路径**: `/category`

## Web页面接口

### 1. 分类管理页面
- **接口**: `GET /category/manage`
- **功能**: 返回分类管理页面
- **响应**: 返回 `category/manage.html` 页面，包含分类列表数据

## API接口列表

### 1. 添加分类
- **接口**: `POST /category/add`
- **功能**: 添加新的书籍分类
- **请求参数**:
```json
{
  "categoryName": "分类名称",
  "description": "分类描述（可选）",
  "sortOrder": "排序顺序（可选）",
  "status": "分类状态（可选，默认启用）"
}
```
- **响应结果**:
```json
{
  "code": 200,
  "msg": "添加成功",
  "data": null
}
```

### 2. 获取分类列表
- **接口**: `GET /category/list`
- **功能**: 获取所有书籍分类列表
- **请求参数**: 无
- **响应结果**:
```json
{
  "code": 200,
  "msg": "成功",
  "data": [
    {
      "id": "分类ID",
      "categoryName": "分类名称",
      "description": "分类描述",
      "sortOrder": "排序顺序",
      "status": "分类状态",
      "createdat": "创建时间"
    }
  ]
}
```

### 3. 删除分类
- **接口**: `POST /category/delete`
- **功能**: 删除指定的分类
- **请求参数**:
  - `id`: 分类ID（查询参数）
- **响应结果**:
```json
{
  "code": 200,
  "msg": "删除成功",
  "data": null
}
```

## 分类状态说明
- `1` 或 `启用`: 分类正常可用
- `0` 或 `禁用`: 分类被禁用，不显示在前端

## 排序说明
- 分类列表按`sortOrder`字段排序，数值越小排序越靠前
- 如果`sortOrder`相同，则按创建时间排序

## 业务逻辑
1. **添加分类**: 新添加的分类默认为启用状态，`createdat`自动设置为当前时间
2. **删除检查**: 删除分类前应检查该分类下是否还有书籍，有书籍的分类不应直接删除
3. **层级结构**: 当前为单级分类，如需多级分类需要扩展表结构

## 错误处理
所有接口在出现错误时返回统一格式：
```json
{
  "code": 500,
  "msg": "错误描述",
  "data": null
}
```

## 注意事项
1. 分类名称应保证唯一性
2. 删除分类前需要检查关联的书籍
3. 分类的排序顺序影响前端显示顺序
4. 禁用的分类在前端选择器中不应显示
5. 分类管理通常需要管理员权限
